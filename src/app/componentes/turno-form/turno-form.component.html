<div id="nuevo_turno_container" class="cristal_card">

    <div id="nuevo_turno_title">
        Nuevo turno
    </div>

    <div id="turno_a_solicitar_container" class="cristal_card">
        <div id="turno_a_solicitar_datos_container">
            <div>
                <label for="turno_a_solicitar_paciente">Paciente:</label>
                @if (_paciente) {
                <span>{{_paciente.nombre + ", " + _paciente.apellido}}</span>
                <button pButton icon="fa fa-times" severity="danger" [rounded]="true"
                    (click)="CancelarPaciente()"></button>
                }
            </div>

            <div>
                <label for="turno_a_solicitar_especialidad">Especialidad:</label>
                @if (_especialidad) {
                <span>{{_especialidad.nombre}}</span>
                <button pButton icon="fa fa-times" severity="danger" [rounded]="true"
                    (click)="CancelarEspecialidad()"></button>
                }
            </div>

            <div>
                <label for="turno_a_solicitar_especialista">Especialista:</label>
                @if (_especialista) {
                <span>{{_especialista.nombre + ", " + _especialista.apellido}}</span>
                <button pButton icon="fa fa-times" severity="danger" [rounded]="true"
                    (click)="CancelarEspecialista()"></button>
                }
            </div>

            <div>
                <label for="turno_a_solicitar_fecha">Fecha:</label>
                @if (_fecha) {
                <span>{{_fecha | fechaDiaMes}}</span>
                <button pButton icon="fa fa-times" severity="danger" [rounded]="true"
                    (click)="CancelarFecha()"></button>
                }
            </div>

            <div>
                <label for="turno_a_solicitar_hora">Hora:</label>
                @if (_hora) {
                <span>{{_hora}}</span>
                <button pButton icon="fa fa-times" severity="danger" [rounded]="true" (click)="CancelarHora()"></button>
                }
            </div>
        </div>

        <div id="turno_a_solicitar_button_container">
            <button pButton id="turno_a_solicitar_button" label="Solicitar Turno" severity="primary"
                [disabled]="!(_paciente && _especialidad && _especialista && _fecha && _hora)"></button>
        </div>
    </div>

    <div id="turno_form_container">
        @if (!_paciente && pacientes) {
        <div id="turno_form_pacientes_container" name="turno_form_item_container">
            <div name="turno_form_item_label">Elija un paciente:</div>

            <div name="buttons_container">
                @for (paciente of pacientes; track $index) {
                <button pButton name="turno_form_paciente_button" severity="info" styleClass="fullwidth"
                    (click)="ElegirPaciente(paciente)">
                    <div name="turno_form_button_data_container">
                        <div name="turno_form_button_img_container"><img [src]="paciente.url_foto_1"></div>
                        <div name="turno_form_button_label">{{paciente.nombre + ", " + paciente.apellido}}</div>
                    </div>
                </button>
                }
            </div>
        </div>
        }

        @if (!_especialidad && _paciente && especialidades) {
        <div id="turno_form_especialidades_container" name="turno_form_item_container">
            <div name="turno_form_item_label">Elija una especialidad:</div>

            <div name="buttons_container">
                @for (especialidad of especialidades; track $index) {
                <button pButton name="turno_form_especialidad_button" severity="help" styleClass="fullwidth"
                    (click)="ElegirEspecialidad(especialidad)">
                    <div name="turno_form_button_data_container">
                        <div name="turno_form_button_label">{{especialidad.nombre}}</div>
                        <!-- <div name="turno_form_button_img_container"><img [src]="especialidad.url_foto"></div> -->
                    </div>
                </button>
                }
            </div>

        </div>
        }

        @if (!_especialista && _paciente && _especialidad && especialistas) {
        <div id="turno_form_especialistas_container" name="turno_form_item_container">
            <div name="turno_form_item_label">Elija un especialista:</div>

            <div name="buttons_container">
                @for (especialista of especialistas; track $index) {
                <button pButton name="turno_form_especialista_button" severity="success" styleClass="fullwidth"
                    (click)="ElegirEspecialista(especialista)">
                    <div name="turno_form_button_data_container">
                        <div name="turno_form_button_label">{{especialista.nombre + ", " + especialista.apellido}}</div>
                        <div name="turno_form_button_img_container"><img [src]="especialista.url_foto_1"></div>
                    </div>
                </button>
                }
            </div>
        </div>
        }

        @if (!_fecha && _paciente && _especialidad && _especialista && fechas_disponibles) {
        <div id="turno_form_fechas_container" name="turno_form_item_container">
            <div name="turno_form_item_label">Elija la fecha:</div>

            <div name="buttons_container">
                @for (fecha of fechas_disponibles; track $index) {
                <button pButton name="turno_form_fecha_button" [label]="fecha | fechaDiaMes" severity="contrast"
                    (click)="ElegirFecha(fecha)"></button>
                }
            </div>
        </div>
        }

        @if (!_hora && _paciente && _especialidad && _especialista && _fecha && turnos_filtrados_fecha) {
        <div id="turno_form_horarios_container" name="buttons_container" name="turno_form_item_container">
            <div name="turno_form_item_label">Elija la hora:</div>

            <div name="buttons_container">
                @for (turno of turnos_filtrados_fecha; track $index) {
                <button pButton name="turno_form_hora_button" [label]='turno.hora' severity="contrast"
                    (click)="ElegirHora(turno.hora)"></button>
                }
            </div>
        </div>
        }
    </div>

</div>